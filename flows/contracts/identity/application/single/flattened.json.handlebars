{{!
  Given an 'application' contract with a single root application, use the first applicant
	as the default primary
}}
{{#with (contract 'application') as |application|}}
  {{#obj}}
    {{{ json application }}}
    {{#if (includes application.tags "parent_plus") }}
      {{#unless application.applicant}}
        {{#if (eq ../request.params.id application.applicants.[0].id)}}
          { "primary": {{{ json application.applicants.[0] }}}, "applicant": {{{ json application.applicants.[0] }}}, "role": "primary" }
        {{else if (eq ../request.params.id application.applicants.[1].id)}}
          { "applicant": {{{ json application.applicants.[1] }}}, "role": "beneficiary" }
        {{/if}}
      {{/unless}}
    {{else}}
      {{#unless application.primary}}
        { "primary": {{{ json application.applicants.[0] }}} }
      {{/unless}}
      {{#unless application.applicant}}
        {{#if (eq ../request.params.id application.applicants.[0].id)}}
          { "applicant": {{{ json application.applicants.[0] }}}, "role": "primary" }
        {{else if (eq ../request.params.id application.applicants.[1].id)}}
          { "applicant": {{{ json application.applicants.[1] }}}, "role": "cosigner" }
        {{else if (eq ../request.params.id application.id)}}
          { "applicant": {{{ json application.applicants.[0] }}}, "role": "root" }
        {{/if}}
      {{/unless}}
    {{/if}}
  {{/obj}}
{{else}}
  null
{{/with}}