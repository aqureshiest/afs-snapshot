{
  {{#with (contract 'query') as |query|}}
    "query": {{{ json query }}},
  {{/with}}
  "criteria": {{#list}}
    {{#if request.body.values.email}}
      { "email": {{{ json request.body.values.email }}} }
    {{else}}
      {{#with (contract 'auth') as |auth|}}
        { "email": {{{ json auth.artifacts.email }}} }
      {{/with}}
    {{/if}}
  {{/list}}
  {{#with request.query}}
     {{#if limit}}
       ,"limit": {{{json limit}}}
     {{/if}}
     {{#if page}}
      ,"page": {{{json page}}}
     {{/if}}
  {{/with}}
}
